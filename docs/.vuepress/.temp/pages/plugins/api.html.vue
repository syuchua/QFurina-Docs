<template><div><h1 id="插件基类" tabindex="-1"><a class="header-anchor" href="#插件基类"><span>插件基类</span></a></h1>
<div class="language-python line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre v-pre  class="shiki github-dark vp-code" style="background-color:#24292e;color:#e1e4e8 language-python"><code><span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#F97583">class</span><span style="color:#B392F0"> PluginBase</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">ABC</span><span style="color:#E1E4E8">):</span></span></span>
<span class="line"><span class="line"><span style="color:#E1E4E8">    plugins: Dict[</span><span style="color:#79B8FF">str</span><span style="color:#E1E4E8">, Any] </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> {}</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#B392F0">    @</span><span style="color:#79B8FF">classmethod</span></span></span>
<span class="line"><span class="line"><span style="color:#F97583">    def</span><span style="color:#B392F0"> register</span><span style="color:#E1E4E8">(cls, name):</span></span></span>
<span class="line"><span class="line"><span style="color:#F97583">        def</span><span style="color:#B392F0"> decorator</span><span style="color:#E1E4E8">(plugin_class):</span></span></span>
<span class="line"><span class="line"><span style="color:#79B8FF">            cls</span><span style="color:#E1E4E8">.plugins[name] </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> plugin_class</span></span></span>
<span class="line"><span class="line"><span style="color:#E1E4E8">            plugin_class.register_name </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> name </span><span style="color:#6A737D"># 设置插件的注册名称</span></span></span>
<span class="line"><span class="line"><span style="color:#F97583">            return</span><span style="color:#E1E4E8"> plugin_class</span></span></span>
<span class="line"><span class="line"><span style="color:#F97583">        return</span><span style="color:#E1E4E8"> decorator</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#F97583">    def</span><span style="color:#79B8FF"> __init__</span><span style="color:#E1E4E8">(self):</span></span></span>
<span class="line"><span class="line"><span style="color:#79B8FF">        self</span><span style="color:#E1E4E8">.name </span><span style="color:#F97583">=</span><span style="color:#9ECBFF"> "Base Plugin"</span></span></span>
<span class="line"><span class="line"><span style="color:#79B8FF">        self</span><span style="color:#E1E4E8">.version </span><span style="color:#F97583">=</span><span style="color:#9ECBFF"> "1.0.0"</span></span></span>
<span class="line"><span class="line"><span style="color:#79B8FF">        self</span><span style="color:#E1E4E8">.description </span><span style="color:#F97583">=</span><span style="color:#9ECBFF"> "Base plugin class"</span></span></span>
<span class="line"><span class="line"><span style="color:#79B8FF">        self</span><span style="color:#E1E4E8">.enabled </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> False</span></span></span>
<span class="line"><span class="line"><span style="color:#79B8FF">        self</span><span style="color:#E1E4E8">.priority </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> 0</span></span></span>
<span class="line"><span class="line"><span style="color:#79B8FF">        self</span><span style="color:#E1E4E8">.register_name </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> getattr</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">self</span><span style="color:#E1E4E8">.</span><span style="color:#79B8FF">__class__</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">'register_name'</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">self</span><span style="color:#E1E4E8">.name.lower().replace(</span><span style="color:#9ECBFF">' '</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">'_'</span><span style="color:#E1E4E8">))</span></span></span>
<span class="line"><span class="line"><span style="color:#79B8FF">        self</span><span style="color:#E1E4E8">.plugin_dir </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> os.path.dirname(os.path.abspath(</span><span style="color:#79B8FF">self</span><span style="color:#E1E4E8">.</span><span style="color:#79B8FF">__class__</span><span style="color:#E1E4E8">.</span><span style="color:#79B8FF">__module__</span><span style="color:#E1E4E8">))</span></span></span>
<span class="line"><span class="line"><span style="color:#79B8FF">        self</span><span style="color:#E1E4E8">.config_file </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> os.path.join(</span><span style="color:#79B8FF">self</span><span style="color:#E1E4E8">.plugin_dir, </span><span style="color:#9ECBFF">'config.json'</span><span style="color:#E1E4E8">)</span></span></span>
<span class="line"><span class="line"><span style="color:#79B8FF">        self</span><span style="color:#E1E4E8">.ensure_config()</span></span></span>
<span class="line"><span class="line"><span style="color:#79B8FF">        self</span><span style="color:#E1E4E8">.load_config()</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#F97583">    def</span><span style="color:#B392F0"> ensure_config</span><span style="color:#E1E4E8">(self):</span></span></span>
<span class="line"><span class="line"><span style="color:#9ECBFF">        """确保插件配置文件存在"""</span></span></span>
<span class="line"><span class="line"><span style="color:#F97583">        if</span><span style="color:#F97583"> not</span><span style="color:#E1E4E8"> os.path.exists(</span><span style="color:#79B8FF">self</span><span style="color:#E1E4E8">.config_file):</span></span></span>
<span class="line"><span class="line"><span style="color:#F97583">            with</span><span style="color:#79B8FF"> open</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">self</span><span style="color:#E1E4E8">.config_file, </span><span style="color:#9ECBFF">'w'</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">encoding</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">'utf-8'</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">as</span><span style="color:#E1E4E8"> f:</span></span></span>
<span class="line"><span class="line"><span style="color:#E1E4E8">                json.dump({}, f, </span><span style="color:#FFAB70">ensure_ascii</span><span style="color:#F97583">=</span><span style="color:#79B8FF">False</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">indent</span><span style="color:#F97583">=</span><span style="color:#79B8FF">4</span><span style="color:#E1E4E8">)</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#F97583">    def</span><span style="color:#B392F0"> get_plugin_path</span><span style="color:#E1E4E8">(self, filename: </span><span style="color:#79B8FF">str</span><span style="color:#E1E4E8">) -> </span><span style="color:#79B8FF">str</span><span style="color:#E1E4E8">:</span></span></span>
<span class="line"><span class="line"><span style="color:#9ECBFF">        """获取插件文件的完整路径"""</span></span></span>
<span class="line"><span class="line"><span style="color:#F97583">        return</span><span style="color:#E1E4E8"> os.path.join(</span><span style="color:#79B8FF">self</span><span style="color:#E1E4E8">.plugin_dir, filename)</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#F97583">    def</span><span style="color:#B392F0"> load_config</span><span style="color:#E1E4E8">(self):</span></span></span>
<span class="line"><span class="line"><span style="color:#9ECBFF">        """加载插件配置"""</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#F97583">        with</span><span style="color:#79B8FF"> open</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">self</span><span style="color:#E1E4E8">.config_file, </span><span style="color:#9ECBFF">'r'</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">encoding</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">'utf-8'</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">as</span><span style="color:#E1E4E8"> f:</span></span></span>
<span class="line"><span class="line"><span style="color:#79B8FF">            self</span><span style="color:#E1E4E8">.config </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> json.load(f)</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#F97583">    def</span><span style="color:#B392F0"> save_config</span><span style="color:#E1E4E8">(self):</span></span></span>
<span class="line"><span class="line"><span style="color:#9ECBFF">        """保存插件配置"""</span></span></span>
<span class="line"><span class="line"><span style="color:#F97583">        with</span><span style="color:#79B8FF"> open</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">self</span><span style="color:#E1E4E8">.config_file, </span><span style="color:#9ECBFF">'w'</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">encoding</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">'utf-8'</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">as</span><span style="color:#E1E4E8"> f:</span></span></span>
<span class="line"><span class="line"><span style="color:#E1E4E8">            json.dump(</span><span style="color:#79B8FF">self</span><span style="color:#E1E4E8">.config, f, </span><span style="color:#FFAB70">ensure_ascii</span><span style="color:#F97583">=</span><span style="color:#79B8FF">False</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">indent</span><span style="color:#F97583">=</span><span style="color:#79B8FF">4</span><span style="color:#E1E4E8">)</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#E1E4E8">    </span></span></span>
<span class="line"><span class="line"><span style="color:#B392F0">    @abstractmethod</span></span></span>
<span class="line"><span class="line"><span style="color:#F97583">    async</span><span style="color:#F97583"> def</span><span style="color:#B392F0"> on_load</span><span style="color:#E1E4E8">(self):</span></span></span>
<span class="line"><span class="line"><span style="color:#9ECBFF">        """当插件被加载时调用"""</span></span></span>
<span class="line"><span class="line"><span style="color:#F97583">        pass</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#B392F0">    @abstractmethod</span></span></span>
<span class="line"><span class="line"><span style="color:#F97583">    async</span><span style="color:#F97583"> def</span><span style="color:#B392F0"> on_unload</span><span style="color:#E1E4E8">(self):</span></span></span>
<span class="line"><span class="line"><span style="color:#9ECBFF">        """当插件被卸载时调用"""</span></span></span>
<span class="line"><span class="line"><span style="color:#F97583">        pass</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#F97583">    async</span><span style="color:#F97583"> def</span><span style="color:#B392F0"> on_enable</span><span style="color:#E1E4E8">(self):</span></span></span>
<span class="line"><span class="line"><span style="color:#9ECBFF">        """当插件被启用时调用"""</span></span></span>
<span class="line"><span class="line"><span style="color:#79B8FF">        self</span><span style="color:#E1E4E8">.enabled </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> True</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#F97583">    async</span><span style="color:#F97583"> def</span><span style="color:#B392F0"> on_disable</span><span style="color:#E1E4E8">(self):</span></span></span>
<span class="line"><span class="line"><span style="color:#9ECBFF">        """当插件被禁用时调用"""</span></span></span>
<span class="line"><span class="line"><span style="color:#79B8FF">        self</span><span style="color:#E1E4E8">.enabled </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> False</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#F97583">    async</span><span style="color:#F97583"> def</span><span style="color:#B392F0"> on_message</span><span style="color:#E1E4E8">(self, message: Dict[</span><span style="color:#79B8FF">str</span><span style="color:#E1E4E8">, Any]) -> </span><span style="color:#79B8FF">str</span><span style="color:#E1E4E8">:</span></span></span>
<span class="line"><span class="line"><span style="color:#9ECBFF">        """当收到消息时调用"""</span></span></span>
<span class="line"><span class="line"><span style="color:#F97583">        return</span><span style="color:#79B8FF"> None</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#F97583">    async</span><span style="color:#F97583"> def</span><span style="color:#B392F0"> on_file_upload</span><span style="color:#E1E4E8">(self, file_path: </span><span style="color:#79B8FF">str</span><span style="color:#E1E4E8">):</span></span></span>
<span class="line"><span class="line"><span style="color:#9ECBFF">        """当文件被上传时调用"""</span></span></span>
<span class="line"><span class="line"><span style="color:#F97583">        pass</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#F97583">    def</span><span style="color:#B392F0"> get_commands</span><span style="color:#E1E4E8">(self) -> List[Dict[</span><span style="color:#79B8FF">str</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">str</span><span style="color:#E1E4E8">]]:</span></span></span>
<span class="line"><span class="line"><span style="color:#9ECBFF">        """获取插件支持的命令列表"""</span></span></span>
<span class="line"><span class="line"><span style="color:#F97583">        return</span><span style="color:#E1E4E8"> []</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#F97583">    async</span><span style="color:#F97583"> def</span><span style="color:#B392F0"> handle_command</span><span style="color:#E1E4E8">(self, command: </span><span style="color:#79B8FF">str</span><span style="color:#E1E4E8">, args: Dict[</span><span style="color:#79B8FF">str</span><span style="color:#E1E4E8">, Any]) -> </span><span style="color:#79B8FF">str</span><span style="color:#E1E4E8">:</span></span></span>
<span class="line"><span class="line"><span style="color:#9ECBFF">        """处理插件命令"""</span></span></span>
<span class="line"><span class="line"><span style="color:#F97583">        return</span><span style="color:#F97583"> f</span><span style="color:#9ECBFF">"Command '</span><span style="color:#79B8FF">{</span><span style="color:#E1E4E8">command</span><span style="color:#79B8FF">}</span><span style="color:#9ECBFF">' not implemented for </span><span style="color:#79B8FF">{self</span><span style="color:#E1E4E8">.name</span><span style="color:#79B8FF">}</span><span style="color:#9ECBFF">"</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#F97583">    def</span><span style="color:#B392F0"> get_help</span><span style="color:#E1E4E8">(self) -> </span><span style="color:#79B8FF">str</span><span style="color:#E1E4E8">:</span></span></span>
<span class="line"><span class="line"><span style="color:#9ECBFF">        """获取插件帮助信息"""</span></span></span>
<span class="line"><span class="line"><span style="color:#E1E4E8">        commands </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> self</span><span style="color:#E1E4E8">.get_commands()</span></span></span>
<span class="line"><span class="line"><span style="color:#F97583">        if</span><span style="color:#F97583"> not</span><span style="color:#E1E4E8"> commands:</span></span></span>
<span class="line"><span class="line"><span style="color:#F97583">            return</span><span style="color:#F97583"> f</span><span style="color:#9ECBFF">"</span><span style="color:#79B8FF">{self</span><span style="color:#E1E4E8">.name</span><span style="color:#79B8FF">}</span><span style="color:#9ECBFF"> v</span><span style="color:#79B8FF">{self</span><span style="color:#E1E4E8">.version</span><span style="color:#79B8FF">}\n{self</span><span style="color:#E1E4E8">.description</span><span style="color:#79B8FF">}\n</span><span style="color:#9ECBFF">该插件没有可用的命令。"</span></span></span>
<span class="line"><span class="line"><span style="color:#E1E4E8">        </span></span></span>
<span class="line"><span class="line"><span style="color:#E1E4E8">        help_text </span><span style="color:#F97583">=</span><span style="color:#F97583"> f</span><span style="color:#9ECBFF">"</span><span style="color:#79B8FF">{self</span><span style="color:#E1E4E8">.name</span><span style="color:#79B8FF">}</span><span style="color:#9ECBFF"> v</span><span style="color:#79B8FF">{self</span><span style="color:#E1E4E8">.version</span><span style="color:#79B8FF">}\n{self</span><span style="color:#E1E4E8">.description</span><span style="color:#79B8FF">}\n\n</span><span style="color:#9ECBFF">可用命令:</span><span style="color:#79B8FF">\n</span><span style="color:#9ECBFF">"</span></span></span>
<span class="line"><span class="line"><span style="color:#F97583">        for</span><span style="color:#E1E4E8"> cmd </span><span style="color:#F97583">in</span><span style="color:#E1E4E8"> commands:</span></span></span>
<span class="line"><span class="line"><span style="color:#E1E4E8">            help_text </span><span style="color:#F97583">+=</span><span style="color:#F97583"> f</span><span style="color:#9ECBFF">"/</span><span style="color:#79B8FF">{</span><span style="color:#E1E4E8">cmd[</span><span style="color:#9ECBFF">'name'</span><span style="color:#E1E4E8">]</span><span style="color:#79B8FF">}</span><span style="color:#9ECBFF"> - </span><span style="color:#79B8FF">{</span><span style="color:#E1E4E8">cmd[</span><span style="color:#9ECBFF">'description'</span><span style="color:#E1E4E8">]</span><span style="color:#79B8FF">}\n</span><span style="color:#9ECBFF">"</span></span></span>
<span class="line"><span class="line"><span style="color:#F97583">        return</span><span style="color:#E1E4E8"> help_text</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#B392F0">    @</span><span style="color:#79B8FF">classmethod</span></span></span>
<span class="line"><span class="line"><span style="color:#F97583">    def</span><span style="color:#B392F0"> get_all_plugins</span><span style="color:#E1E4E8">(cls) -> Dict[</span><span style="color:#79B8FF">str</span><span style="color:#E1E4E8">, Any]:</span></span></span>
<span class="line"><span class="line"><span style="color:#9ECBFF">        """获取所有注册的插件"""</span></span></span>
<span class="line"><span class="line"><span style="color:#F97583">        return</span><span style="color:#79B8FF"> cls</span><span style="color:#E1E4E8">.plugins</span></span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="onebotv11相关配置" tabindex="-1"><a class="header-anchor" href="#onebotv11相关配置"><span>onebotv11相关配置</span></a></h1>
<div class="language-python line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre v-pre  class="shiki github-dark vp-code" style="background-color:#24292e;color:#e1e4e8 language-python"><code><span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#6A737D"># 定义消息类型枚举</span></span></span>
<span class="line"><span class="line"><span style="color:#F97583">class</span><span style="color:#B392F0"> MessageType</span><span style="color:#E1E4E8">(</span><span style="color:#B392F0">Enum</span><span style="color:#E1E4E8">):</span></span></span>
<span class="line"><span class="line"><span style="color:#79B8FF">    PRIVATE</span><span style="color:#F97583"> =</span><span style="color:#9ECBFF"> "private"</span><span style="color:#6A737D">  # 私聊消息</span></span></span>
<span class="line"><span class="line"><span style="color:#79B8FF">    GROUP</span><span style="color:#F97583"> =</span><span style="color:#9ECBFF"> "group"</span><span style="color:#6A737D">  # 群聊消息</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#6A737D"># 定义事件类型枚举</span></span></span>
<span class="line"><span class="line"><span style="color:#F97583">class</span><span style="color:#B392F0"> EventType</span><span style="color:#E1E4E8">(</span><span style="color:#B392F0">Enum</span><span style="color:#E1E4E8">):</span></span></span>
<span class="line"><span class="line"><span style="color:#79B8FF">    MESSAGE</span><span style="color:#F97583"> =</span><span style="color:#9ECBFF"> "message"</span><span style="color:#6A737D">  # 消息事件</span></span></span>
<span class="line"><span class="line"><span style="color:#79B8FF">    NOTICE</span><span style="color:#F97583"> =</span><span style="color:#9ECBFF"> "notice"</span><span style="color:#6A737D">  # 通知事件</span></span></span>
<span class="line"><span class="line"><span style="color:#79B8FF">    REQUEST</span><span style="color:#F97583"> =</span><span style="color:#9ECBFF"> "request"</span><span style="color:#6A737D">  # 请求事件</span></span></span>
<span class="line"><span class="line"><span style="color:#79B8FF">    META_EVENT</span><span style="color:#F97583"> =</span><span style="color:#9ECBFF"> "meta_event"</span><span style="color:#6A737D">  # 元事件</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#6A737D"># 定义通知类型枚举</span></span></span>
<span class="line"><span class="line"><span style="color:#F97583">class</span><span style="color:#B392F0"> NoticeType</span><span style="color:#E1E4E8">(</span><span style="color:#B392F0">Enum</span><span style="color:#E1E4E8">):</span></span></span>
<span class="line"><span class="line"><span style="color:#79B8FF">    GROUP_UPLOAD</span><span style="color:#F97583"> =</span><span style="color:#9ECBFF"> "group_upload"</span><span style="color:#6A737D">  # 群文件上传</span></span></span>
<span class="line"><span class="line"><span style="color:#79B8FF">    GROUP_ADMIN</span><span style="color:#F97583"> =</span><span style="color:#9ECBFF"> "group_admin"</span><span style="color:#6A737D">  # 群管理员变动</span></span></span>
<span class="line"><span class="line"><span style="color:#79B8FF">    GROUP_DECREASE</span><span style="color:#F97583"> =</span><span style="color:#9ECBFF"> "group_decrease"</span><span style="color:#6A737D">  # 群成员减少</span></span></span>
<span class="line"><span class="line"><span style="color:#79B8FF">    GROUP_INCREASE</span><span style="color:#F97583"> =</span><span style="color:#9ECBFF"> "group_increase"</span><span style="color:#6A737D">  # 群成员增加</span></span></span>
<span class="line"><span class="line"><span style="color:#79B8FF">    GROUP_BAN</span><span style="color:#F97583"> =</span><span style="color:#9ECBFF"> "group_ban"</span><span style="color:#6A737D">  # 群禁言</span></span></span>
<span class="line"><span class="line"><span style="color:#79B8FF">    FRIEND_ADD</span><span style="color:#F97583"> =</span><span style="color:#9ECBFF"> "friend_add"</span><span style="color:#6A737D">  # 好友添加</span></span></span>
<span class="line"><span class="line"><span style="color:#79B8FF">    GROUP_RECALL</span><span style="color:#F97583"> =</span><span style="color:#9ECBFF"> "group_recall"</span><span style="color:#6A737D">  # 群消息撤回</span></span></span>
<span class="line"><span class="line"><span style="color:#79B8FF">    FRIEND_RECALL</span><span style="color:#F97583"> =</span><span style="color:#9ECBFF"> "friend_recall"</span><span style="color:#6A737D">  # 好友消息撤回</span></span></span>
<span class="line"><span class="line"><span style="color:#79B8FF">    POKE</span><span style="color:#F97583"> =</span><span style="color:#9ECBFF"> "poke"</span><span style="color:#6A737D">  # 戳一戳</span></span></span>
<span class="line"><span class="line"><span style="color:#79B8FF">    LUCKY_KING</span><span style="color:#F97583"> =</span><span style="color:#9ECBFF"> "lucky_king"</span><span style="color:#6A737D">  # 运气王</span></span></span>
<span class="line"><span class="line"><span style="color:#79B8FF">    HONOR</span><span style="color:#F97583"> =</span><span style="color:#9ECBFF"> "honor"</span><span style="color:#6A737D">  # 群荣誉变更</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#6A737D"># 定义请求类型枚举</span></span></span>
<span class="line"><span class="line"><span style="color:#F97583">class</span><span style="color:#B392F0"> RequestType</span><span style="color:#E1E4E8">(</span><span style="color:#B392F0">Enum</span><span style="color:#E1E4E8">):</span></span></span>
<span class="line"><span class="line"><span style="color:#79B8FF">    FRIEND</span><span style="color:#F97583"> =</span><span style="color:#9ECBFF"> "friend"</span><span style="color:#6A737D">  # 好友请求</span></span></span>
<span class="line"><span class="line"><span style="color:#79B8FF">    GROUP</span><span style="color:#F97583"> =</span><span style="color:#9ECBFF"> "group"</span><span style="color:#6A737D">  # 群请求</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#6A737D"># 定义消息段类型</span></span></span>
<span class="line"><span class="line"><span style="color:#F97583">class</span><span style="color:#B392F0"> MessageSegment</span><span style="color:#E1E4E8">(</span><span style="color:#B392F0">TypedDict</span><span style="color:#E1E4E8">):</span></span></span>
<span class="line"><span class="line"><span style="color:#79B8FF">    type</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">str</span><span style="color:#6A737D">  # 消息段类型</span></span></span>
<span class="line"><span class="line"><span style="color:#E1E4E8">    data: </span><span style="color:#79B8FF">dict</span><span style="color:#6A737D">  # 消息段数据</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#6A737D"># 定义发送者信息类型</span></span></span>
<span class="line"><span class="line"><span style="color:#F97583">class</span><span style="color:#B392F0"> Sender</span><span style="color:#E1E4E8">(</span><span style="color:#B392F0">TypedDict</span><span style="color:#E1E4E8">):</span></span></span>
<span class="line"><span class="line"><span style="color:#E1E4E8">    user_id: </span><span style="color:#79B8FF">int</span><span style="color:#6A737D">  # 用户ID</span></span></span>
<span class="line"><span class="line"><span style="color:#E1E4E8">    nickname: </span><span style="color:#79B8FF">str</span><span style="color:#6A737D">  # 昵称</span></span></span>
<span class="line"><span class="line"><span style="color:#E1E4E8">    sex: </span><span style="color:#79B8FF">str</span><span style="color:#6A737D">  # 性别</span></span></span>
<span class="line"><span class="line"><span style="color:#E1E4E8">    age: </span><span style="color:#79B8FF">int</span><span style="color:#6A737D">  # 年龄</span></span></span>
<span class="line"><span class="line"><span style="color:#E1E4E8">    card: </span><span style="color:#79B8FF">str</span><span style="color:#6A737D">  # 群名片</span></span></span>
<span class="line"><span class="line"><span style="color:#E1E4E8">    area: </span><span style="color:#79B8FF">str</span><span style="color:#6A737D">  # 地区</span></span></span>
<span class="line"><span class="line"><span style="color:#E1E4E8">    level: </span><span style="color:#79B8FF">str</span><span style="color:#6A737D">  # 等级</span></span></span>
<span class="line"><span class="line"><span style="color:#E1E4E8">    role: </span><span style="color:#79B8FF">str</span><span style="color:#6A737D">  # 角色</span></span></span>
<span class="line"><span class="line"><span style="color:#E1E4E8">    title: </span><span style="color:#79B8FF">str</span><span style="color:#6A737D">  # 头衔</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#6A737D"># 定义群消息事件类型</span></span></span>
<span class="line"><span class="line"><span style="color:#F97583">class</span><span style="color:#B392F0"> GroupMessageEvent</span><span style="color:#E1E4E8">(</span><span style="color:#B392F0">TypedDict</span><span style="color:#E1E4E8">):</span></span></span>
<span class="line"><span class="line"><span style="color:#E1E4E8">    post_type: </span><span style="color:#79B8FF">str</span><span style="color:#6A737D">  # 上报类型</span></span></span>
<span class="line"><span class="line"><span style="color:#E1E4E8">    message_type: </span><span style="color:#79B8FF">str</span><span style="color:#6A737D">  # 消息类型</span></span></span>
<span class="line"><span class="line"><span style="color:#E1E4E8">    time: </span><span style="color:#79B8FF">int</span><span style="color:#6A737D">  # 事件发生的时间戳</span></span></span>
<span class="line"><span class="line"><span style="color:#E1E4E8">    self_id: </span><span style="color:#79B8FF">int</span><span style="color:#6A737D">  # 收到事件的机器人 QQ 号</span></span></span>
<span class="line"><span class="line"><span style="color:#E1E4E8">    sub_type: </span><span style="color:#79B8FF">str</span><span style="color:#6A737D">  # 消息子类型</span></span></span>
<span class="line"><span class="line"><span style="color:#E1E4E8">    message_id: </span><span style="color:#79B8FF">int</span><span style="color:#6A737D">  # 消息 ID</span></span></span>
<span class="line"><span class="line"><span style="color:#E1E4E8">    user_id: </span><span style="color:#79B8FF">int</span><span style="color:#6A737D">  # 发送者 QQ 号</span></span></span>
<span class="line"><span class="line"><span style="color:#E1E4E8">    message: Union[</span><span style="color:#79B8FF">str</span><span style="color:#E1E4E8">, List[MessageSegment]]  </span><span style="color:#6A737D"># 消息内容</span></span></span>
<span class="line"><span class="line"><span style="color:#E1E4E8">    raw_message: </span><span style="color:#79B8FF">str</span><span style="color:#6A737D">  # 原始消息内容</span></span></span>
<span class="line"><span class="line"><span style="color:#E1E4E8">    font: </span><span style="color:#79B8FF">int</span><span style="color:#6A737D">  # 字体</span></span></span>
<span class="line"><span class="line"><span style="color:#E1E4E8">    sender: Sender  </span><span style="color:#6A737D"># 发送人信息</span></span></span>
<span class="line"><span class="line"><span style="color:#E1E4E8">    group_id: </span><span style="color:#79B8FF">int</span><span style="color:#6A737D">  # 群号</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#6A737D"># 定义私聊消息事件类型</span></span></span>
<span class="line"><span class="line"><span style="color:#F97583">class</span><span style="color:#B392F0"> PrivateMessageEvent</span><span style="color:#E1E4E8">(</span><span style="color:#B392F0">TypedDict</span><span style="color:#E1E4E8">):</span></span></span>
<span class="line"><span class="line"><span style="color:#E1E4E8">    post_type: </span><span style="color:#79B8FF">str</span><span style="color:#6A737D">  # 上报类型</span></span></span>
<span class="line"><span class="line"><span style="color:#E1E4E8">    message_type: </span><span style="color:#79B8FF">str</span><span style="color:#6A737D">  # 消息类型</span></span></span>
<span class="line"><span class="line"><span style="color:#E1E4E8">    time: </span><span style="color:#79B8FF">int</span><span style="color:#6A737D">  # 事件发生的时间戳</span></span></span>
<span class="line"><span class="line"><span style="color:#E1E4E8">    self_id: </span><span style="color:#79B8FF">int</span><span style="color:#6A737D">  # 收到事件的机器人 QQ 号</span></span></span>
<span class="line"><span class="line"><span style="color:#E1E4E8">    sub_type: </span><span style="color:#79B8FF">str</span><span style="color:#6A737D">  # 消息子类型</span></span></span>
<span class="line"><span class="line"><span style="color:#E1E4E8">    message_id: </span><span style="color:#79B8FF">int</span><span style="color:#6A737D">  # 消息 ID</span></span></span>
<span class="line"><span class="line"><span style="color:#E1E4E8">    user_id: </span><span style="color:#79B8FF">int</span><span style="color:#6A737D">  # 发送者 QQ 号</span></span></span>
<span class="line"><span class="line"><span style="color:#E1E4E8">    message: Union[</span><span style="color:#79B8FF">str</span><span style="color:#E1E4E8">, List[MessageSegment]]  </span><span style="color:#6A737D"># 消息内容</span></span></span>
<span class="line"><span class="line"><span style="color:#E1E4E8">    raw_message: </span><span style="color:#79B8FF">str</span><span style="color:#6A737D">  # 原始消息内容</span></span></span>
<span class="line"><span class="line"><span style="color:#E1E4E8">    font: </span><span style="color:#79B8FF">int</span><span style="color:#6A737D">  # 字体</span></span></span>
<span class="line"><span class="line"><span style="color:#E1E4E8">    sender: Sender  </span><span style="color:#6A737D"># 发送人信息</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#6A737D"># 可以继续添加其他事件类型的定义...</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#6A737D"># 判断是否为群消息</span></span></span>
<span class="line"><span class="line"><span style="color:#F97583">def</span><span style="color:#B392F0"> is_group_message</span><span style="color:#E1E4E8">(event: </span><span style="color:#79B8FF">dict</span><span style="color:#E1E4E8">) -> </span><span style="color:#79B8FF">bool</span><span style="color:#E1E4E8">:</span></span></span>
<span class="line"><span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> event.get(</span><span style="color:#9ECBFF">'message_type'</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">==</span><span style="color:#E1E4E8"> MessageType.</span><span style="color:#79B8FF">GROUP</span><span style="color:#E1E4E8">.value</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#6A737D"># 判断是否为私聊消息</span></span></span>
<span class="line"><span class="line"><span style="color:#F97583">def</span><span style="color:#B392F0"> is_private_message</span><span style="color:#E1E4E8">(event: </span><span style="color:#79B8FF">dict</span><span style="color:#E1E4E8">) -> </span><span style="color:#79B8FF">bool</span><span style="color:#E1E4E8">:</span></span></span>
<span class="line"><span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> event.get(</span><span style="color:#9ECBFF">'message_type'</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">==</span><span style="color:#E1E4E8"> MessageType.</span><span style="color:#79B8FF">PRIVATE</span><span style="color:#E1E4E8">.value</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#6A737D"># 获取用户ID</span></span></span>
<span class="line"><span class="line"><span style="color:#F97583">def</span><span style="color:#B392F0"> get_user_id</span><span style="color:#E1E4E8">(event: </span><span style="color:#79B8FF">dict</span><span style="color:#E1E4E8">) -> </span><span style="color:#79B8FF">int</span><span style="color:#E1E4E8">:</span></span></span>
<span class="line"><span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> event.get(</span><span style="color:#9ECBFF">'user_id'</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">)</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#6A737D"># 获取群ID</span></span></span>
<span class="line"><span class="line"><span style="color:#F97583">def</span><span style="color:#B392F0"> get_group_id</span><span style="color:#E1E4E8">(event: </span><span style="color:#79B8FF">dict</span><span style="color:#E1E4E8">) -> </span><span style="color:#79B8FF">int</span><span style="color:#E1E4E8">:</span></span></span>
<span class="line"><span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> event.get(</span><span style="color:#9ECBFF">'group_id'</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">)</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#6A737D"># 获取消息内容</span></span></span>
<span class="line"><span class="line"><span style="color:#F97583">def</span><span style="color:#B392F0"> get_message_content</span><span style="color:#E1E4E8">(event: </span><span style="color:#79B8FF">dict</span><span style="color:#E1E4E8">) -> </span><span style="color:#79B8FF">str</span><span style="color:#E1E4E8">:</span></span></span>
<span class="line"><span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> event.get(</span><span style="color:#9ECBFF">'raw_message'</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">''</span><span style="color:#E1E4E8">)</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#F97583">def</span><span style="color:#B392F0"> get_sender</span><span style="color:#E1E4E8">(event: </span><span style="color:#79B8FF">dict</span><span style="color:#E1E4E8">) -> Sender:</span></span></span>
<span class="line"><span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> event.get(</span><span style="color:#9ECBFF">'sender'</span><span style="color:#E1E4E8">, {})</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#F97583">def</span><span style="color:#B392F0"> get_username</span><span style="color:#E1E4E8">(event: </span><span style="color:#79B8FF">dict</span><span style="color:#E1E4E8">) -> </span><span style="color:#79B8FF">str</span><span style="color:#E1E4E8">:</span></span></span>
<span class="line"><span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> event.get(</span><span style="color:#9ECBFF">'sender'</span><span style="color:#E1E4E8">, {}).get(</span><span style="color:#9ECBFF">'nickname'</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">''</span><span style="color:#E1E4E8">)</span></span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></template>


