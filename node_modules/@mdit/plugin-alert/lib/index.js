const N=/^>(?:(?: {0,3})| {0,2}\t {0,1})\[!(.*)\]\s*$/i,O=(i,{alertNames:A=["tip","warning","caution","important","note"],deep:v=!1,openRender:M,closeRender:I,titleRender:y}={})=>{const R=(t,s,l,T)=>{if(t.sCount[s]-t.blkIndent>=4||t.level!==0&&!v)return!1;const S=t.bMarks[s]+t.tShift[s],$=t.eMarks[s];if(t.src.charAt(S)!==">")return!1;const k=N.exec(t.src.slice(S,$));if(!k||!A.includes(k[1].toLowerCase()))return!1;if(T)return!0;const p=k[1].toLowerCase(),b=[],h=[],n=[],u=[],q=t.lineMax,J=t.parentType,L=t.md.block.ruler.getRules("alert");t.parentType="alert";let e;for(e=s+1;e<l;e++){let r=!1,x=!1,o=t.bMarks[e]+t.tShift[e];const m=t.eMarks[e],E=t.sCount[e]<t.blkIndent;if(o>=m)break;if(t.src.charAt(o++)===">"&&!E){let a,c=t.sCount[e]+1;t.src.charAt(o)===" "?(o++,c++,r=!1,a=!0):t.src.charAt(o)==="	"?(a=!0,(t.bsCount[e]+c)%4===3?(o++,c++,r=!1):r=!0):a=!1;let d=c;for(b.push(t.bMarks[e]),t.bMarks[e]=o;o<m;){const g=t.src.charAt(o);if(g==="	")d+=4-(d+t.bsCount[e]+(r?1:0))%4;else if(g===" ")d++;else break;o++}x=o>=m,h.push(t.bsCount[e]),t.bsCount[e]=t.sCount[e]+1+(a?1:0),n.push(t.sCount[e]),t.sCount[e]=d-c,u.push(t.tShift[e]),t.tShift[e]=o-t.bMarks[e];continue}if(x)break;let _=!1;for(const a of L)if(a(t,e,l,!0)){_=!0;break}if(_){t.lineMax=e,t.blkIndent!==0&&(b.push(t.bMarks[e]),h.push(t.bsCount[e]),u.push(t.tShift[e]),n.push(t.sCount[e]),t.sCount[e]-=t.blkIndent);break}b.push(t.bMarks[e]),h.push(t.bsCount[e]),u.push(t.tShift[e]),n.push(t.sCount[e]),t.sCount[e]=-1}const j=t.blkIndent;t.blkIndent=0;const z=[s,s+1],w=[s+1,0],C=t.push("alert_open","div",1);C.markup=p,C.attrJoin("class",`markdown-alert markdown-alert-${p}`),C.map=w;const f=t.push("alert_title","",0);f.attrJoin("class","markdown-alert-title"),f.markup=p,f.content=k[1],f.map=z,t.md.block.tokenize(t,s+1,e);const B=t.push("alert_close","div",-1);B.markup=p,t.lineMax=q,t.parentType=J,w[1]=t.line;for(let r=0;r<u.length;r++)t.bMarks[r+s]=b[r],t.tShift[r+s]=u[r],t.sCount[r+s]=n[r],t.bsCount[r+s]=h[r];return t.blkIndent=j,!0};i.block.ruler.before("blockquote","alert",R,{alt:["paragraph","reference","blockquote","list"]}),M&&(i.renderer.rules.alert_open=M),I&&(i.renderer.rules.alert_close=I),i.renderer.rules.alert_title=y??((t,s)=>{const l=t[s];return`<p class="markdown-alert-title">${l.content[0].toUpperCase()+l.content.substring(1).toLowerCase()}</p>
`})};export{O as alert};
//# sourceMappingURL=index.js.map
